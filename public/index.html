<!doctype html>
<html ng-app='crowdtro'>
  <head>
    <meta charset=utf-8>
    <title>Crowdtro</title>
    <link rel='stylesheet' href='/stylesheets/bootstrap.min.css' type='text/css' charset='utf-8' media='screen'>
    <link rel='stylesheet' href='/stylesheets/bootstrap.responsive.min.css' type='text/css' charset='utf-8' media='screen'>

    <script src='/javascripts/jquery.min.js' type='text/javascript' charset='utf-8'></script>
    <script src='/javascripts/bootstrap.min.js' type='text/javascript' charset='utf-8'></script>

    <script src='/javascripts/angular.js' type='text/javascript' charset='utf-8'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular-resource.min.js'></script>

    <script src='/v2/crowdtro.js' type='text/javascript' charset='utf-8'></script>
  </head>

  <body ng-controller='CrowdtroCtrl'>

    <div ng-repeat='concern in concerns | filter:{complete:false}'>
      <div ng-hide='editing'>
        {{concern.content}} @ {{concern.score}}
        <div class='btn-toolbar'>
          <div class='btn-group'>
            <a class='btn btn-mini' href='#/' ng-click='completeConcern(concern)'><i class='icon-ok'></i></a>
          </div>
          <div class='btn-group'>
            <a class='btn btn-mini' href='#/' ng-click='editing = true'><i class='icon-edit'></i></a>
            <a class='btn btn-mini' href='#/' ng-click='trashConcern($index)'><i class='icon-trash'></i></a>
          </div>
          <div class='btn-group'>
            <a class='btn btn-mini' href='#/' ng-click='downVote(concern)'><i class='icon-minus'></i></a>
            <a class='btn btn-mini' href='#/' ng-click='upVote(concern)'><i class='icon-plus'></i></a>
          </div>
        </div>
      </div>

      <div ng-show='editing'>
        <form ng-submit='editing = false'>
          <textarea ng-model='concern.content'> </textarea>
          <input type='submit' value='Update' ng-click='updateConcern($index)'>
        </form>
      </div>
    </div>

    <hr>

    <div>
      <form>
        <textarea ng-model='newConcern.content'> </textarea>
        <input type='submit' value='Save' ng-click='addConcern(newConcern)'>
      </form>
    </div>

    <hr>

    <div ng-repeat="concern in concerns | filter:{complete:true}">
      <div>
        {{concern.content}} @ {{concern.score}}
        <br/>
        <div class='btn-toolbar'>
          <div class='btn-group'>
            <a class='btn btn-mini' href='#/' ng-click='resurrectConcern(concern)'><i class='icon-ok'></i></a>
            <a class='btn btn-mini' href='#/' ng-click='trashConcern($index)'><i class='icon-trash'></i></a>
          </div>
          <div class='btn-group'>
            <a class='btn btn-mini' href='#/' ng-click='downVote(concern)'><i class='icon-minus'></i></a>
            <a class='btn btn-mini' href='#/' ng-click='upVote(concern)'><i class='icon-plus'></i></a>
          </div>
        </div>
      </div>
    </div>

  </body>
</html>
